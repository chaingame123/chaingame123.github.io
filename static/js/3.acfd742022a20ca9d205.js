webpackJsonp([3],{D50i:function(a,t){},mfWC:function(a,t,i){"use strict";t.a={subStringEOS:function(a,t){if(t=t||"EOS",a){if("string"==typeof a){var i=a.indexOf(t);return i=i||a.length,a.substring(0,i)}return a}}}},niaT:function(a,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("rViV");var r=i("d2gY"),e=i("mfWC"),o={props:["pieData"],data:function(){return{airdropDataList:[],allAirdropDataList:[],airdropDataListShow:!0,airShow:!0,gameinfo:[{gameid:0,status:0,counter:0,init_max:"68718748890",total_burn:0,total_alive:"68718748890",total_reserved:0,quote_balance:"1010689.1369 EOS",init_quote_balance:"1000000.0000 EOS",hero:"",claim_price:""}],currentNumber:0,current_air_drop:0,air_drop_step:"",arrowShow:!1,arrowUpShow:!1,gameidGlobal:"",air_drop_reward:"",init_quote_balance:"",is_show:!0}},created:function(){this.eosClient=this.$EOS(r.a.eosOptions),this.get_global(),this.get_gameinfo()},mounted:function(){var a=this,t=this;this.$ms.$on("result",function(a){0==a?t.airShow=!1:1==a&&(t.airShow=!0)}),setInterval(function(){a.get_gameinfo()},500)},computed:{tokenName:function(){return r.a.tokenName},claimPrice:function(){var a=this.ultimatePrize();return((this.pieData.quote_balance-this.pieData.init_quote_balance-a)/(this.pieData.total_reserved+this.pieData.total_lose)).toFixed(4)}},methods:{ultimatePrize:function(){var a=this.pieData.quote_balance-this.pieData.init_quote_balance,t=[a>0?(a/100*this.pieData.end_prize_ratio).toFixed(4):0,"5000"];return Math.min.apply(null,t)},get_global:function(){var a=this;this.eosClient.getTableRows({json:"true",code:r.a.gameContract,scope:r.a.gameContract,table:"global",limit:100,lower_bound:0}).then(function(t){t.rows&&t.rows.length>0&&(a.gameidGlobal=t.rows[0].gameid,a.get_gameinfo(),a.bonus(),a.air_drop_step=t.rows[0].air_drop_step)}).catch(function(a){console.error(a)})},get_gameinfo:function(){var a=this;this.eosClient.getTableRows({json:"true",code:r.a.gameContract,scope:r.a.gameContract,table:"game",limit:100,lower_bound:0}).then(function(t){a.gameinfo=t.rows,a.gameinfo[a.gameidGlobal]&&(a.currentNumber=a.gameinfo[a.gameidGlobal].counter,a.air_drop_reward=e.a.subStringEOS(a.gameinfo[a.gameidGlobal].quote_balance,r.a.tokenName),a.init_quote_balance=e.a.subStringEOS(a.gameinfo[a.gameidGlobal].init_quote_balance,r.a.tokenName))}).catch(function(a){console.error(a)})},bonus:function(){var a=this;this.airdropDataList=[],this.allAirdropDataList=[],this.eosClient.getTableRows({json:"true",code:r.a.contractName,scope:this.gameidGlobal,table:"bonus",limit:100,lower_bound:0}).then(function(t){a.allAirdropDataList=t.rows.reverse(),a.allAirdropDataList.length>0&&(a.current_air_drop=a.allAirdropDataList[0].count,a.airdropDataList=a.allAirdropDataList.slice(0,1)),a.allAirdropDataList.length>1&&(a.arrowShow=!0,a.arrowUpShow=!1)}).catch(function(a){console.error(a)})},showMore:function(){this.arrowShow=!1,this.arrowUpShow=!0,this.airdropDataList=this.allAirdropDataList,this.$emit("hideGit",!1),this.is_show,this.airdropDataListShow},showUp:function(){this.arrowShow=!0,this.arrowUpShow=!1,this.airdropDataList=this.allAirdropDataList.slice(0,1)},controlAirdrop:function(a){this.airShow=a}}},s={render:function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"airdrop-box animated",class:[1==a.airShow?"fadeInRight":"fadeOutRight"]},[i("div",[i("span",[a._v(a._s(a.$t("airdrop.title")))]),i("span",{staticClass:"title"})]),a._v(" "),i("p",{staticClass:"currentNumber"},[a._v(a._s(a.currentNumber))]),a._v(" "),i("ul",{staticClass:"airdropData"},[i("li",{staticClass:"item future"},[i("span",[a._v(a._s(a.current_air_drop+2*a.air_drop_step))]),a._v(" "),i("div",[i("p",[a._v(a._s(a.$t("airdrop.award"))+"："+a._s(a.claimPrice)+a._s(a.tokenName))]),a._v(" "),i("p",[a._v(a._s(a.$t("airdrop.estimated")))])])]),a._v(" "),i("li",{staticClass:"item current"},[i("span",[a._v(a._s(a.current_air_drop+a.air_drop_step))]),a._v(" "),i("div",[i("p",[a._v(a._s(a.$t("airdrop.award"))+"："+a._s(a.claimPrice)+a._s(a.tokenName))]),a._v(" "),i("p",[a._v(a._s(a.$t("airdrop.estimated")))])])]),a._v(" "),a._l(a.airdropDataList,function(t){return i("li",{directives:[{name:"show",rawName:"v-show",value:a.airdropDataListShow,expression:"airdropDataListShow"}],key:t.index,staticClass:"item"},[i("span",[a._v(a._s(t.count))]),a._v(" "),i("div",[i("p",[a._v(a._s(t.owner))]),a._v(" "),i("p",[a._v(a._s(a.$t("airdrop.award"))+"："+a._s(t.reward))])])])}),a._v(" "),a._l(a.allAirdropDataList,function(t){return i("li",{directives:[{name:"show",rawName:"v-show",value:!a.airdropDataListShow,expression:"!airdropDataListShow"}],key:t.index,staticClass:"item"},[i("span",[a._v(a._s(t.count))]),a._v(" "),i("div",[i("p",[a._v(a._s(t.owner))]),a._v(" "),i("p",[a._v(a._s(a.$t("airdrop.award"))+"："+a._s(t.reward))])])])})],2),a._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:a.arrowShow,expression:"arrowShow"}],staticClass:"arrow",on:{click:function(t){a.showMore()}}}),a._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:a.arrowUpShow,expression:"arrowUpShow"}],staticClass:"arrow arrowup",on:{click:function(t){a.showUp()}}})])},staticRenderFns:[]};var n=i("VU/8")(o,s,!1,function(a){i("D50i")},"data-v-bd1add22",null);t.default=n.exports}});